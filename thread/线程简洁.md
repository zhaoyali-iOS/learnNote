## 基本概念
### 线程
CPU核一次只能执行一个命令，不能执行某处分开的并列的两个命令，所以cpu核执行的命令不会出现分歧，就好比一条无分叉的路径，这就是一个线程。

### 多线程
一个物理cpu芯片有多个核，一个cpu核虚拟为两个cpu核工作，那么一个多核cpu就出现多条不分叉的命令路径，即多线程。<br/>
### 线程切换
线程切换又叫上下文切换：内核发生操作系统事件(如每一定时间会唤起系统调用)时就会切换执行路径，执行路径中的状态(即线程状态，如cpu寄存器等信息)保存到各自路径专用内存块中，切换路径时从目标路径专用的内存块中复原路径状态，进而继续执行路径的命令列<br/>

### 线程状态
![thread_status](image/thread_status.png)
线程池中存放的是可以被系统调度的线程或正在被系统调度的线程。
如果
### 多线程优缺点
多线程引发的问题：多线程编程实际上很容易发生各种问题
1. 数据竞争：多个线程同时更新同一块数据导致的数据不一致
2. 死锁：线程中有停止等待事件，会出现多个线程互相停止等待
3. 太多线程会消耗大量内存资源
<br/>
多线程的优点：可以保证程序的响应性能，防止卡顿(线程阻塞,尤其主线程)，提升用户体验，所以还是要使用多线程编程。这一个优点就使多线程利大于弊，所以多线程被广泛应用。




# 多线程
## 资源共享
资源共享：一块内存同时被多个线程访问。每个线程可能会对资源数据进行修改。
场景：线程A修改一块内存资源，同时线程B也修改了这块共享内存；此后如果线程C去访问数据，那就不确定会是怎样的数据(最终共享内存的数据要看AB线程任务执行结束的时间)
解决：所以一般对共享资源访问(读/写，尤其写)时，要进行加锁操作。共享资源在app中一般指：单例、文件和数据库等持久化操作、UI更新为了安全只能在主线程操作等

## 线程通信

# 使用场景
##scroller滑动时图片不立即下载，停止滑动后优先下载停在位置的图片



### 串行和并发--任务的分发方式
串行：在一个线程中任务按顺序执行，一个任务完之后再执行下一个任务，好比生活中的“一个窗口排一个队”<br/>
并行：多个任务同时开始，一个线程一会处理这个任务，一会处理那个任务，不是真正的同时进行，好比生活中的“一个窗口排多个队”<br/>
并发：多个任务同时被多个线程处理，好比生活中“多个窗口排多条队”<br/>

### 同步和异步--任务的执行方式
同步任务sync：不能开启新线程
异步任务async：有创建多个线程的能力
